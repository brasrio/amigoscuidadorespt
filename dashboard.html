<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Amigos Cuidadores</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <!-- Header do Dashboard -->
    <header class="dashboard-header">
        <div class="header-container">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <a href="index.html" class="logo">
                    <img src="assets/images/logo.svg" alt="Amigos Cuidadores">
                    <span>Amigos Cuidadores</span>
                </a>
            </div>
            
            <div class="header-right">
                <div class="user-info">
                    <div class="user-avatar">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRTVFN0VCIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iMzUiIHI9IjE1IiBmaWxsPSIjOUM5Q0EzIi8+CjxwYXRoIGQ9Ik0yMCA3MFE1MCA1MCA4MCA3MCIgc3Ryb2tlPSIjOUM5Q0EzIiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz4KPC9zdmc+" alt="Avatar" id="headerAvatar">
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="userName">Carregando...</span>
                        <span class="user-type" id="userType">...</span>
                    </div>
                    <button class="logout-btn" id="logoutBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                        Sair
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="dashboard-sidebar" id="sidebar">
        <nav class="sidebar-nav">
            <a href="#" class="nav-item active" data-page="home">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span>Início</span>
            </a>
            
            <a href="#" class="nav-item" data-page="profile">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>Meu Perfil</span>
            </a>

            <!-- Menu específico para Cliente -->
            <div class="nav-section client-only">
                <a href="#" class="nav-item" data-page="search">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <span>Buscar Cuidadores</span>
                </a>
                
                <a href="#" class="nav-item" data-page="bookings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                    </svg>
                    <span>Meus Agendamentos</span>
                </a>
            </div>

            <!-- Menu específico para Cuidador -->
            <div class="nav-section caregiver-only">
                <a href="#" class="nav-item" data-page="availability">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                    <span>Disponibilidade</span>
                </a>
                
                <a href="#" class="nav-item" data-page="skills">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                    </svg>
                    <span>Skills & Certificados</span>
                </a>
                
                <a href="#" class="nav-item" data-page="my-clients">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Meus Clientes</span>
                </a>
            </div>

            <!-- Menu específico para Admin -->
            <div class="nav-section admin-only">
                <a href="#" class="nav-item" data-page="users">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Gerenciar Usuários</span>
                </a>
                
                <a href="#" class="nav-item" data-page="reports">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                        <polyline points="10 9 9 9 8 9"></polyline>
                    </svg>
                    <span>Relatórios</span>
                </a>
            </div>

            <!-- Menu comum para todos -->
            <div class="nav-section">
                <a href="#" class="nav-item" data-page="payments">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                    <span>Pagamentos</span>
                </a>
                
                <a href="#" class="nav-item" data-page="settings">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m11-6h-6m-6 0H1"></path>
                    </svg>
                    <span>Configurações</span>
                </a>
            </div>
        </nav>
    </aside>

    <!-- Conteúdo Principal -->
    <main class="dashboard-main">
        <!-- Página Inicial -->
        <section class="dashboard-page active" id="page-home">
            <div class="page-header">
                <h1>Bem-vindo ao Dashboard</h1>
                <p class="welcome-message">Olá, <span id="welcomeName">Usuário</span>!</p>
            </div>

            <!-- Cards de estatísticas -->
            <div class="stats-grid" id="statsGrid">
                <!-- Conteúdo dinâmico baseado no tipo de usuário -->
            </div>

            <!-- Ações rápidas -->
            <div class="quick-actions" id="quickActions">
                <!-- Conteúdo dinâmico baseado no tipo de usuário -->
            </div>
        </section>

        <!-- Página de Busca (Cliente) -->
        <section class="dashboard-page" id="page-search">
            <div class="page-header">
                <h1>Buscar Cuidadores</h1>
            </div>

            <div class="search-container">
                <form class="search-form" id="searchForm">
                    <div class="search-filters">
                        <div class="filter-group">
                            <label>Localização</label>
                            <select id="searchDistrito">
                                <option value="">Todos os distritos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label>Tipo de Cuidador</label>
                            <select id="searchType">
                                <option value="">Todos</option>
                                <option value="caregiver">Cuidador</option>
                                <option value="nurse">Enfermeiro</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label>Especialidades</label>
                            <input type="text" id="searchSpecialties" placeholder="Ex: idosos, alzheimer">
                        </div>
                        
                        <div class="filter-group">
                            <label>Valor Máximo/Hora</label>
                            <input type="number" id="searchMaxRate" placeholder="€ 0.00">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                            Buscar
                        </button>
                    </div>
                </form>

                <div class="search-results" id="searchResults">
                    <!-- Resultados da busca aparecem aqui -->
                </div>
            </div>
        </section>

        <!-- Página de Perfil -->
        <section class="dashboard-page" id="page-profile">
            <div class="page-header">
                <h1>Meu Perfil</h1>
                <button class="btn btn-primary" id="editProfileBtn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                    Editar Perfil
                </button>
            </div>

            <div class="profile-container">
                <div class="profile-header">
                <div class="profile-avatar">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRTVFN0VCIi8+CjxjaXJjbGUgY3g9IjUwIiBjeT0iMzUiIHI9IjE1IiBmaWxsPSIjOUM5Q0EzIi8+CjxwYXRoIGQ9Ik0yMCA3MFE1MCA1MCA4MCA3MCIgc3Ryb2tlPSIjOUM5Q0EzIiBzdHJva2Utd2lkdGg9IjgiIGZpbGw9Im5vbmUiLz4KPC9zdmc+" alt="Avatar" id="profileAvatar">
                        <button class="avatar-upload-btn" id="avatarUploadBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="16"></line>
                                <line x1="8" y1="12" x2="16" y2="12"></line>
                            </svg>
                        </button>
                        <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="profile-info">
                        <h2 id="profileName">Nome do Usuário</h2>
                        <p id="profileEmail">email@exemplo.com</p>
                        <span class="profile-badge" id="profileBadge">Tipo</span>
                    </div>
                </div>

                <div class="profile-details" id="profileDetails">
                    <!-- Detalhes do perfil carregados dinamicamente -->
                </div>
            </div>
        </section>

        <!-- Página de Disponibilidade (Cuidador) -->
        <section class="dashboard-page" id="page-availability">
            <!-- Conteúdo preenchido via JS -->
        </section>

        <!-- Página de Skills & Certificados (Cuidador) -->
        <section class="dashboard-page" id="page-skills">
            <!-- Conteúdo preenchido via JS -->
        </section>

        <!-- Página de Meus Clientes (Cuidador) -->
        <section class="dashboard-page" id="page-my-clients">
            <div class="empty-state">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <h3>Meus Clientes</h3>
                <p>Esta seção mostrará os clientes com quem você possui agendamentos.</p>
            </div>
        </section>

        <!-- Página de Gerenciar Usuários (Admin) -->
        <section class="dashboard-page" id="page-users">
            <div class="page-header">
                <h1>Gerenciar Usuários</h1>
                <div class="header-actions">
                    <input type="text" id="userSearch" placeholder="Buscar usuários..." class="search-input">
                    <button class="btn btn-primary" id="addUserBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <line x1="20" y1="8" x2="20" y2="14"></line>
                            <line x1="23" y1="11" x2="17" y2="11"></line>
                        </svg>
                        Adicionar Usuário
                    </button>
                </div>
            </div>

            <div class="users-table-container">
                <table class="users-table" id="usersTable">
                    <thead>
                        <tr>
                            <th>Avatar</th>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Tipo</th>
                            <th>Status</th>
                            <th>Data Cadastro</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Usuários carregados dinamicamente -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Página de Pagamentos -->
        <section class="dashboard-page" id="page-payments">
            <div class="page-header">
                <h1>Pagamentos</h1>
            </div>

            <div class="payment-container">
                <div class="payment-methods">
                    <h3>Métodos de Pagamento</h3>
                    <div class="payment-cards" id="paymentCards">
                        <!-- Cartões salvos -->
                    </div>
                    <button class="btn btn-secondary" id="addPaymentBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                            <line x1="1" y1="10" x2="23" y2="10"></line>
                        </svg>
                        Adicionar Cartão
                    </button>
                </div>

                <div class="payment-history">
                    <h3>Histórico de Pagamentos</h3>
                    <div class="transactions-list" id="transactionsList">
                        <!-- Transações carregadas dinamicamente -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modais -->
    <!-- Modal de Edição de Perfil -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Perfil</h2>
                <button class="modal-close" data-modal="editProfileModal">&times;</button>
            </div>
            <form id="editProfileForm">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" id="editName" required>
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="editPhone">
                </div>
                <div class="form-group">
                    <label>Endereço</label>
                    <input type="text" id="editAddress">
                </div>
                <div class="form-group caregiver-only">
                    <label>Biografia</label>
                    <textarea id="editBio" rows="4"></textarea>
                </div>
                <div class="form-group caregiver-only">
                    <label>Taxa por Hora (€)</label>
                    <input type="number" id="editHourlyRate" step="0.01">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="editProfileModal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Edição de Usuário (Admin) -->
    <div class="modal" id="adminEditUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Usuário</h2>
                <button class="modal-close" data-modal="adminEditUserModal">&times;</button>
            </div>
            <form id="adminEditUserForm">
                <input type="hidden" id="adminEditUserId">
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="adminEditName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="adminEditEmail" required>
                </div>
                <div class="form-group">
                    <label>Tipo de usuário</label>
                    <select id="adminEditType" required>
                        <option value="client">Cliente</option>
                        <option value="caregiver">Cuidador</option>
                        <option value="nurse">Enfermeiro</option>
                        <option value="admin">Administrador</option>
                    </select>
                </div>
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="adminEditVerified">
                        Usuário verificado (aparece na busca de cuidadores)
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="adminEditUserModal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar alterações</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Detalhes do Profissional -->
    <div class="modal" id="professionalModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>Detalhes do Profissional</h2>
                <button class="modal-close" data-modal="professionalModal">&times;</button>
            </div>
            <div class="professional-modal-body">
                <div class="professional-header">
                    <div class="professional-avatar">
                        <img src="" alt="Avatar" id="professionalModalAvatar">
                    </div>
                    <div>
                        <h3 id="professionalModalName">Nome do profissional</h3>
                        <p id="professionalModalType">Tipo</p>
                        <div class="professional-contact">
                            <span id="professionalModalEmail"></span>
                            <span id="professionalModalPhone"></span>
                        </div>
                    </div>
                </div>

                <div class="professional-info-grid">
                    <div class="info-card">
                        <h4>Taxa por hora</h4>
                        <p id="professionalModalHourlyRate">€ 0,00</p>
                    </div>
                    <div class="info-card">
                        <h4>Experiência</h4>
                        <p id="professionalModalExperience">Não informada</p>
                    </div>
                    <div class="info-card">
                        <h4>Disponibilidade</h4>
                        <div id="professionalModalAvailability" class="availability-list compact"></div>
                    </div>
                </div>

                <div class="professional-section">
                    <h4>Especialidades</h4>
                    <div id="professionalModalSpecialties" class="tag-list"></div>
                </div>

                <div class="professional-section">
                    <h4>Certificados</h4>
                    <div id="professionalModalCertificates" class="certificate-list"></div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" data-modal="professionalModal">Fechar</button>
                    <a href="#" target="_blank" rel="noopener" class="btn btn-success" id="professionalContactBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21.5 13.5C21.5 18.1944 17.6944 22 13 22C8.30558 22 4.5 18.1944 4.5 13.5C4.5 8.80558 8.30558 5 13 5C17.6944 5 21.5 8.80558 21.5 13.5Z"></path>
                            <path d="M8.5 3H15.5L18 5.5V8"></path>
                            <path d="M11 12H15.5V16.5"></path>
                            <path d="M6.5 16.5L11 12"></path>
                        </svg>
                        Falar no WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>